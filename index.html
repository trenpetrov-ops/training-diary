<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="orientation" content="portrait">

    
    <title>–î–Ω–µ–≤–Ω–∏–∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</title>
    <link rel="manifest" href="./manifest.json">
    <link rel="stylesheet" href="./styles.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>

</head>
<body>

<div id="auth-screen">
    <div class="auth-box">
        <h3>–í—Ö–æ–¥ –≤ –î–Ω–µ–≤–Ω–∏–∫</h3>
        <input type="email" id="auth-email" placeholder="Email">
        <input type="password" id="auth-password" placeholder="–ü–∞—Ä–æ–ª—å">
        <button id="auth-login-btn" class="btn btn-primary">–í–æ–π—Ç–∏</button>
        <button id="auth-toggle-btn" class="auth-toggle-btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
    </div>
</div>

<div id="mode-select-screen">
    <div class="mode-select-box">
        <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</h3>
        <div class="mode-options">
            <button id="select-own-mode" class="mode-btn">
                <span class="mode-icon">üèãÔ∏è</span>
                <h4>–õ–∏—á–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h4>
                <p>–í–∞—à–∏ —Ü–∏–∫–ª—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã</p>
            </button>

            <button id="select-personal-mode" class="mode-btn">
                <span class="mode-icon">üë•</span>
                <h4>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–∏–Ω–≥</h4>
                <p>–†–∞–±–æ—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏</p>
            </button>
        </div>
        <button id="mode-logout-btn" class="btn back-btn logout-btn">–í—ã—Ö–æ–¥</button>
    </div>
</div>
<div id="top-bar"></div>
<div class="container">

    <div id="root"></div>

    <div class="navigation">
        <button id="programs-btn" class="nav-btn">
            <div id="programs-icon" class="lottie-icon">
                <!-- SVG —Å—Ç–∞—Ç–∏—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48" height="48" preserveAspectRatio="xMidYMid meet" style="width:100%;height:100%;">
                    <defs>
                        <clipPath id="__lottie_element_74442"><rect width="48" height="48" x="0" y="0"/></clipPath>
                    </defs>

                    <style>
                        /* === –ö–ê–î–†–´ –ê–ù–ò–ú–ê–¶–ò–ô (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ) === */
                        @keyframes swayOnce {
                          0% { transform: rotate(0deg); }
                          25% { transform: rotate(4deg); }
                          75% { transform: rotate(-4deg); }
                          100% { transform: rotate(0deg); }
                        }
                        @keyframes dotUpOnce {
                          0% { transform: translateY(0); opacity: 1; }
                          50% { transform: translateY(-2px); opacity: .95; }
                          100% { transform: translateY(0); opacity: 1; }
                        }
                        @keyframes dotDownOnce {
                          0% { transform: translateY(0); opacity: 1; }
                          50% { transform: translateY(2px); opacity: .95; }
                          100% { transform: translateY(0); opacity: 1; }
                        }

                        /* —Ç—Ä–∏–≥–≥–µ—Ä –∞–Ω–∏–º–∞—Ü–∏–π (–≤–µ—à–∞–µ–º –Ω–∞ #icon) */
                        #icon.play #bell {
                          transform-origin: 24px 24px;
                          animation: swayOnce 2s ease-in-out 1 both;
                        }
                        #icon.play .dot-top    { animation: dotUpOnce   2s ease-in-out 1 both; }
                        #icon.play .dot-bottom { animation: dotDownOnce 2s ease-in-out 1 both; }

                        /* —Å—Ç–∞—Ç–∏–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
                        .dot, #bell { transform: none; opacity: 1; }
                    </style>

                    <!-- –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞ -->
                    <g id="icon">
                        <!-- (1) –ø–æ–∫–∞—á–∏–≤–∞—é—â–∞—è—Å—è —á–∞—Å—Ç—å -->
                        <g id="bell" clip-path="url(#__lottie_element_74442)">
                            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –≥–∞–Ω—Ç–µ–ª–∏ -->
                            <g transform="matrix(0.8833087683,0,0,0.8833087683,2.80059,2.80059)" opacity="1">
                                <g opacity="1" transform="matrix(1,0,0,1,24,24.076)">
                                    <path fill="#fff" d="M6.091,3c0,0-12.182,0-12.182,0c0,0,0-6,0-6c0,0,12.182,0,12.182,0c0,0,0,6,0,6z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="#000" stroke-width="1" d="M6.091,3c0,0-12.182,0-12.182,0c0,0,0-6,0-6c0,0,12.182,0,12.182,0c0,0,0,6,0,6z"></path>
                                </g>
                                <g opacity="1" transform="matrix(1,0,0,1,8.716,24.076)">
                                    <path fill="#fff" d="M0.345,5.935c0,0-0.690,0-0.690,0c-0.744,0-1.348-0.604-1.348-1.348c0,0,0-9.174,0-9.174c0-0.745,0.604-1.349,1.348-1.349c0,0,0.690,0,0.690,0c0.745,0,1.349,0.603,1.349,1.348c0,0,0,9.174,0,9.174C1.694,5.331,1.090,5.935,0.345,5.935z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="#000" stroke-width="1" d="M0.345,5.935c0,0-0.690,0-0.690,0c-0.744,0-1.348-0.604-1.348-1.348c0,0,0-9.174,0-9.174c0-0.745,0.604-1.349,1.348-1.349c0,0,0.690,0,0.690,0c0.745,0,1.349,0.603,1.349,1.348c0,0,0,9.174,0,9.174C1.694,5.331,1.090,5.935,0.345,5.935z"></path>
                                </g>
                                <g opacity="1" transform="matrix(1,0,0,1,39.284,24.076)">
                                    <path fill="#fff" d="M-0.345,-5.935c0,0,0.690,0,0.690,0c0.744,0,1.349,0.604,1.349,1.349c0,0,0,9.174,0,9.174c0,0.745-0.604,1.349-1.349,1.349c0,0-0.690,0-0.690,0c-0.745,0-1.349-0.604-1.349-1.349c0,0,0-9.174,0-9.174C-1.694,-5.331-1.090,-5.935-0.345,-5.935z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="#000" stroke-width="1" d="M-0.345,-5.935c0,0,0.690,0,0.690,0c0.744,0,1.349,0.604,1.349,1.349c0,0,0,9.174,0,9.174c0,0.745-0.604,1.349-1.349,1.349c0,0-0.690,0-0.690,0c-0.745,0-1.349-0.604-1.349-1.349c0,0,0-9.174,0-9.174C-1.694,-5.331-1.090,-5.935-0.345,-5.935z"></path>
                                </g>
                            </g>
                            <!-- –í–Ω–µ—à–Ω–∏–µ –ø–ª–∞—Å—Ç–∏–Ω—ã -->
                            <g transform="matrix(0.8833087683,0,0,0.8833087683,2.80059,2.80059)" opacity="1">
                                <g opacity="1" transform="matrix(1,0,0,1,14.159,24.076)">
                                    <path fill="#fff" d="M1.273,9.046c0,0-2.546,0-2.546,0C-2.641,9.046-3.75,7.936-3.75,6.568c0,0,0-13.136,0-13.136c0-1.368,1.109-2.478,2.477-2.478c0,0,2.546,0,2.546,0c1.368,0,2.477,1.110,2.477,2.478c0,0,0,13.136,0,13.136C3.75,7.936,2.641,9.046,1.273,9.046z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="rgb(0,122,255)" stroke-width="1" d="M1.273,9.046c0,0-2.546,0-2.546,0C-2.641,9.046-3.75,7.936-3.75,6.568c0,0,0-13.136,0-13.136c0-1.368,1.109-2.478,2.477-2.478c0,0,2.546,0,2.546,0c1.368,0,2.477,1.110,2.477,2.478c0,0,0,13.136,0,13.136C3.75,7.936,2.641,9.046,1.273,9.046z"></path>
                                </g>
                                <g opacity="1" transform="matrix(1,0,0,1,33.841,24.076)">
                                    <path fill="#fff" d="M-1.273,-9.046c0,0,2.546,0,2.546,0c1.368,0,2.477,1.110,2.477,2.478c0,0,0,13.136,0,13.136c0,1.368-1.109,2.478-2.477,2.478c0,0-2.546,0-2.546,0c-1.368,0-2.477-1.110-2.477-2.478c0,0,0-13.136,0-13.136C-3.75,-7.936-2.641,-9.046-1.273,-9.046z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="rgb(0,122,255)" stroke-width="1" d="M-1.273,-9.046c0,0,2.546,0,2.546,0c1.368,0,2.477,1.110,2.477,2.478c0,0,0,13.136,0,13.136c0,1.368-1.109,2.478-2.477,2.478c0,0-2.546,0-2.546,0c-1.368,0-2.477-1.110-2.477-2.478c0,0,0-13.136,0-13.136C-3.75,-7.936-2.641,-9.046-1.273,-9.046z"></path>
                                </g>
                            </g>
                        </g>

                        <!-- (2) ¬´—Ç–æ—á–µ—á–∫–∏¬ª (–≤–µ—Ä—Ö/–Ω–∏–∑) ‚Äî –∞–Ω–∏–º–∏—Ä—É—é—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –∫–æ–ª–µ–±–∞–Ω–∏–µ–º -->
                        <g id="dots">
                            <!-- –≤–µ—Ä—Ö–Ω–∏–µ -->
                            <g opacity="1" transform="matrix(1,0,0,1,32.909,10.359)">
                                <path class="dot dot-top" stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="rgb(0,122,255)" stroke-width="1" d="M-0.512,0.505 C-0.512,0.505 -0.417,0.411 -0.285,0.281"></path>
                            </g>
                            <g opacity="1" transform="matrix(1,0,0,1,14.909,10.359)">
                                <path class="dot dot-top" stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="rgb(0,122,255)" stroke-width="1" d="M0.512,0.505 C0.512,0.505 0.417,0.411 0.285,0.281"></path>
                            </g>
                            <g opacity="1" transform="matrix(1,0,0,1,23.771,7.703)">
                                <path class="dot dot-top" stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="rgb(0,122,255)" stroke-width="1" d="M-0.005,0.719 C-0.005,0.719 -0.004,0.585 -0.003,0.4"></path>
                            </g>
                            <!-- –Ω–∏–∂–Ω–∏–µ -->
                            <g opacity="1" transform="matrix(1,0,0,1,14.909,37.641)">
                                <path class="dot dot-bottom" stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="rgb(0,122,255)" stroke-width="1" d="M0.512,-0.505 C0.512,-0.505 0.417,-0.411 0.285,-0.281"></path>
                            </g>
                            <g opacity="1" transform="matrix(1,0,0,1,32.909,37.641)">
                                <path class="dot dot-bottom" stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="rgb(0,122,255)" stroke-width="1" d="M-0.512,-0.505 C-0.512,-0.505 -0.417,-0.411 -0.285,-0.281"></path>
                            </g>
                            <g opacity="1" transform="matrix(1,0,0,1,24.047,40.298)">
                                <path class="dot dot-bottom" stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="rgb(0,122,255)" stroke-width="1" d="M0.005,-0.719 C0.005,-0.719 0.004,-0.585 0.003,-0.4"></path>
                            </g>
                        </g>
                    </g>
                </svg>
            </div>
        </button>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
              const btn  = document.getElementById('programs-btn');
              const icon = btn.querySelector('#icon'); // –æ–±—â–∏–π —Ç—Ä–∏–≥–≥–µ—Ä –¥–ª—è bell + dots

              function playOnce() {
                // —Å–Ω—è—Ç—å/–≤–µ—Ä–Ω—É—Ç—å –∫–ª–∞—Å—Å, —á—Ç–æ–±—ã –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å –∫–∞–∂–¥—ã–π —Ä–∞–∑
                icon.classList.remove('play');
                // —Ñ–æ—Ä—Å-—Ä–µ—Ñ–ª–æ—É ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –¥–∞–∂–µ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—ã–±–æ—Ä–µ
                void icon.offsetWidth;
                icon.classList.add('play');

                // —É–±—Ä–∞—Ç—å –∫–ª–∞—Å—Å –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ (—á–µ—Ä–µ–∑ 2—Å), —á—Ç–æ–±—ã –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ —Ä–∞–±–æ—Ç–∞–ª–æ —Å–Ω–æ–≤–∞
                setTimeout(() => icon.classList.remove('play'), 2000);
              }

              // 1) –∫–ª–∏–∫ –ø–æ –ø—É–Ω–∫—Ç—É ‚Äî –∞–Ω–∏–º–∞—Ü–∏—è 1 —Ä–∞–∑
              btn.addEventListener('click', playOnce);

              // 2) –µ—Å–ª–∏ —Ç–≤–æ–π —Ä–æ—É—Ç–µ—Ä/–º–µ–Ω—é –ø–æ–º–µ—á–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç –∫–ª–∞—Å—Å–æ–º "active"
              //    ‚Äî –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∫–ª–∞—Å—Å–∞ (–≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ –ø—É–Ω–∫—Ç)
              const mo = new MutationObserver(muts => {
                for (const m of muts) {
                  if (m.attributeName === 'class' || m.attributeName === 'aria-selected' || m.attributeName === 'aria-current') {
                    const isActive =
                      btn.classList.contains('active') ||
                      btn.getAttribute('aria-selected') === 'true' ||
                      btn.getAttribute('aria-current') === 'page';
                    if (isActive) playOnce();
                  }
                }
              });
              mo.observe(btn, { attributes: true });

              // 3) –µ—Å–ª–∏ –ø—É–Ω–∫—Ç —Å–∫—Ä—ã–≤–∞—é—Ç/–ø–æ–∫–∞–∑—ã–≤–∞—é—Ç (SPA), –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏, –µ—Å–ª–∏ –æ–Ω –∞–∫—Ç–∏–≤–µ–Ω
              const io = new IntersectionObserver(entries => {
                entries.forEach(e => {
                  if (e.isIntersecting) {
                    const isActive =
                      btn.classList.contains('active') ||
                      btn.getAttribute('aria-selected') === 'true' ||
                      btn.getAttribute('aria-current') === 'page';
                    if (isActive) playOnce();
                  }
                });
              });
              io.observe(btn);
            });
        </script>

        <button id="journal-btn" class="nav-btn">
            <div id="journal-icon" class="lottie-icon"></div>
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                  const journalAnim = lottie.loadAnimation({
                    container: document.getElementById('journal-icon'),
                    renderer: 'svg',
                    loop: false,
                    autoplay: false,
                    path: './icon-animations/menuCalendar.json'
                  });

                  const journalBtn = document.getElementById('journal-btn');
                  let isPlaying = false;

                  journalBtn.addEventListener('click', () => {
                    if (isPlaying) return;
                    isPlaying = true;

                    journalAnim.goToAndPlay(0, true);

                    journalAnim.addEventListener('complete', () => {
                      isPlaying = false;
                      journalAnim.pause(); // –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –∫–∞–¥—Ä–µ
                    });
                  });
                });
            </script>

        </button>
        <button id="supplements-btn" class="nav-btn">
            <div id="supplement-icon" class="lottie-icon"></div>
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                  const supplementsAnim = lottie.loadAnimation({
                    container: document.getElementById('supplement-icon'),
                    renderer: 'svg',
                    loop: false,
                    autoplay: false,
                    path: './icon-animations/menuBad.json'
                  });

                  const supplementsBtn = document.getElementById('supplements-btn');
                  let isPlaying = false;

                  supplementsBtn.addEventListener('click', () => {
                    if (isPlaying) return;
                    isPlaying = true;

                    supplementsAnim.goToAndPlay(0, true);

                    supplementsAnim.addEventListener('complete', () => {
                      isPlaying = false;
                      supplementsAnim.pause(); // –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –∫–∞–¥—Ä–µ
                    });
                  });
                });
            </script>
        </button>
        <button id="reports-btn" class="nav-btn">
            <div id="reports-icon" class="lottie-icon"></div>
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                  const reportsAnim = lottie.loadAnimation({
                    container: document.getElementById('reports-icon'),
                    renderer: 'svg',
                    loop: false,
                    autoplay: false,
                    path: './icon-animations/menuReports.json'
                  });

                  const reportsBtn = document.getElementById('reports-btn');
                  let isPlaying = false;

                  reportsBtn.addEventListener('click', () => {
                    if (isPlaying) return;
                    isPlaying = true;

                    reportsAnim.goToAndPlay(0, true);

                    reportsAnim.addEventListener('complete', () => {
                      isPlaying = false;
                      reportsAnim.pause(); // –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –∫–∞–¥—Ä–µ
                    });
                  });
                });
            </script>
        </button>

    </div>
</div>
<script>
(async function lockOrientationWithFallback() {
  // 1) –ù–∞—Ç–∏–≤–Ω—ã–π –ª–æ–∫ —Ç–∞–º, –≥–¥–µ –æ–Ω –µ—Å—Ç—å (Android/Chrome –∏ —á–∞—Å—Ç—å –¥–µ—Å–∫—Ç–æ–ø–æ–≤)
  try {
    if (screen.orientation && screen.orientation.lock) {
      await screen.orientation.lock('portrait');
    }
  } catch (e) {
    // —Ç–∏—Ö–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º ‚Äî iOS —Å—é–¥–∞ –æ–±—ã—á–Ω–æ –ø–æ–ø–∞–¥–∞–µ—Ç
  }

  // 2) –§–æ–ª–±—ç–∫ –¥–ª—è iOS: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π –≤ –∞–ª—å–±–æ–º–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
  const overlayId = 'rotate-overlay';
  let overlay = document.getElementById(overlayId);
  if (!overlay) {
    overlay = document.createElement('div');
    overlay.id = overlayId;
    overlay.innerHTML = `
      <div class="rotate-box">
        <div class="rotate-icon">üì±‚Ü©Ô∏è</div>
        <div class="rotate-text">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤–µ—Ä–Ω–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ</div>
      </div>
    `;
    document.body.appendChild(overlay);
  }

  function setScrollLocked(locked) {
    // –ë–ª–æ–∫–∏—Ä—É–µ–º ¬´–ø—Ä–æ—Ç—è–≥–∏–≤–∞–Ω–∏–µ¬ª –∏ —Å–∫—Ä–æ–ª –ø–æ–¥ –æ–≤–µ—Ä–ª–µ–µ–º
    document.documentElement.style.overflow = locked ? 'hidden' : '';
    document.body.style.overscrollBehavior = locked ? 'none' : '';
    document.body.style.touchAction = locked ? 'none' : '';
  }

  function updateOverlay() {
    const isLandscape = window.matchMedia('(orientation: landscape)').matches;
    overlay.style.display = isLandscape ? 'flex' : 'none';
    setScrollLocked(isLandscape);
  }

  // –ü–µ—Ä–≤–∏—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–ª—É—à–∞—Ç–µ–ª–∏
  updateOverlay();
  window.addEventListener('orientationchange', updateOverlay);
  window.addEventListener('resize', updateOverlay);
})();
</script>

<script type="module" src="./script.js"></script>
</body>
</html>


